<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title id="meta-title">Portal de Homologación Oficial</title>
    <meta name="description" id="meta-desc" content="Plataforma de validación profesional.">
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&display=swap" rel="stylesheet">
    
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        brand: 'var(--brand-color)',
                        brandDark: 'var(--brand-dark)',
                    }
                }
            }
        }
    </script>
    <style>
        :root {
            --brand-color: #06b6d4;
            --brand-dark: #083344;
        }
        body { font-family: 'Inter', sans-serif; }
        .glass { background: rgba(15, 23, 42, 0.6); backdrop-filter: blur(12px); border: 1px solid rgba(255,255,255,0.1); }
        .input-field { background: rgba(0,0,0,0.3); border: 1px solid rgba(255,255,255,0.1); color: white; }
        .input-field:focus { outline: 2px solid var(--brand-color); border-color: transparent; }
        
        /* Banner dinámico */
        .hero-bg {
            position: absolute; inset: 0; z-index: 0;
            background-size: cover; background-position: center;
            opacity: 0.3; mask-image: linear-gradient(to bottom, black 0%, transparent 100%);
        }
    </style>
</head>
<body class="bg-slate-950 text-white min-h-screen flex flex-col relative overflow-x-hidden">

    <div id="hero-banner" class="hero-bg"></div>
    
    <div class="fixed inset-0 z-0 pointer-events-none">
        <div class="absolute top-0 left-1/2 -translate-x-1/2 w-[800px] h-[500px] bg-brand opacity-20 blur-[120px] rounded-full transition-colors duration-700" id="bg-glow"></div>
    </div>

    <nav class="relative z-50 border-b border-white/10 bg-slate-900/80 backdrop-blur-md">
        <div class="max-w-7xl mx-auto px-6 h-20 flex items-center justify-between">
            <div class="flex items-center gap-3" id="nav-brand-area">
                <i data-lucide="shield" class="w-8 h-8 text-brand"></i>
                <span class="font-bold text-xl tracking-tight" id="site-title">REMAEP</span>
            </div>
            <div class="hidden md:flex gap-6 text-sm font-medium text-slate-300">
                <span id="nav-phone" class="flex items-center gap-2"><i data-lucide="phone" class="w-4 h-4"></i> <span class="val"></span></span>
                <a href="#tramite" class="text-brand hover:text-white transition-colors">Iniciar Trámite</a>
            </div>
        </div>
    </nav>

    <header class="relative z-10 py-24 text-center px-4">
        <h1 class="text-5xl md:text-7xl font-extrabold mb-6 tracking-tight drop-shadow-2xl">
            <span id="hero-title">Registro Nacional</span>
            <span class="block text-brand mt-2 text-glow" id="hero-subtitle">Matrícula Profesional</span>
        </h1>
        <p class="text-slate-300 text-lg max-w-2xl mx-auto mb-10 drop-shadow-md" id="hero-desc">
            Plataforma oficial de validación, homologación y certificación de competencias profesionales.
        </p>
        <div class="flex flex-wrap justify-center gap-4">
            <a href="#tramite" id="hero-cta" class="bg-brand hover:bg-white hover:text-slate-900 text-slate-900 font-bold px-8 py-4 rounded-full transition-all shadow-lg shadow-brand/20">
                Iniciar Trámite
            </a>
        </div>
    </header>

    <section id="tramite" class="relative z-10 py-20">
        <div class="max-w-4xl mx-auto px-6">
            <div class="glass p-8 md:p-12 rounded-3xl border border-brand/30 shadow-2xl relative overflow-hidden">
                
                <div class="text-center mb-10">
                    <h2 class="text-3xl font-bold mb-2">Solicitud de Homologación</h2>
                    <p class="text-slate-400">Complete sus datos para generar el expediente digital.</p>
                </div>

                <form id="homologacionForm" class="space-y-6">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <label class="block text-xs font-bold uppercase text-slate-500 mb-2">Nombre Completo</label>
                            <input type="text" name="nombre" required class="w-full input-field px-4 py-3 rounded-xl">
                        </div>
                        <div>
                            <label class="block text-xs font-bold uppercase text-slate-500 mb-2">DNI / Pasaporte</label>
                            <input type="text" name="dni" required class="w-full input-field px-4 py-3 rounded-xl">
                        </div>
                    </div>
                    
                    <div class="bg-slate-900/50 p-4 rounded-xl border border-white/5">
                        <label class="block text-xs font-bold uppercase text-brand mb-3">Documentación Requerida</label>
                        <div class="flex gap-4">
                            <input type="file" id="file-titulo" class="text-xs text-slate-400 w-full">
                        </div>
                        <div class="flex gap-4 mt-2">
                            <input type="file" id="file-dni" class="text-xs text-slate-400 w-full">
                        </div>
                    </div>

                    <div class="bg-brand/10 p-6 rounded-xl flex items-center justify-between border border-brand/20 mt-8">
                        <div>
                            <p class="text-sm font-bold text-brand uppercase">Costo del Trámite</p>
                            <p class="text-xs text-slate-400">Procesado por Mercado Pago</p>
                        </div>
                        <div class="text-3xl font-black text-white" id="display-price">$50.000</div>
                    </div>

                    <button type="submit" id="btn-submit" class="w-full bg-brand hover:brightness-110 text-slate-900 font-extrabold text-lg py-4 rounded-xl shadow-lg shadow-brand/20 transition-all flex items-center justify-center gap-2">
                        <i data-lucide="credit-card"></i> <span id="btn-text">IR A PAGAR</span>
                    </button>
                </form>
            </div>
        </div>
    </section>

    <footer class="py-12 border-t border-white/5 bg-slate-900 text-sm relative z-10">
        <div class="max-w-7xl mx-auto px-6 grid grid-cols-1 md:grid-cols-3 gap-8">
            <div>
                <h4 class="font-bold text-white mb-4 flex items-center gap-2">
                    <i data-lucide="map-pin" class="text-brand w-4 h-4"></i> Dirección
                </h4>
                <p class="text-slate-400" id="footer-address">Dirección no configurada</p>
            </div>
            <div>
                <h4 class="font-bold text-white mb-4 flex items-center gap-2">
                    <i data-lucide="phone" class="text-brand w-4 h-4"></i> Contacto
                </h4>
                <p class="text-slate-400" id="footer-phone">Teléfono no configurado</p>
                <p class="text-slate-400" id="footer-email">email@ejemplo.com</p>
            </div>
            <div>
                <h4 class="font-bold text-white mb-4">Síguenos</h4>
                <div class="flex gap-4" id="social-links">
                    </div>
            </div>
        </div>
        <div class="text-center text-slate-600 mt-12 pt-8 border-t border-white/5">
            © 2026 <span id="footer-brand">REMAEP</span> · Plataforma SaaS Oficial
        </div>
    </footer>

    <a id="whatsapp-float" href="#" target="_blank" class="hidden fixed bottom-6 right-6 bg-green-500 hover:bg-green-400 text-white p-4 rounded-full shadow-lg z-50 transition-all hover:-translate-y-1">
        <i data-lucide="message-circle" class="w-8 h-8"></i>
    </a>

    <div id="loading-modal" class="fixed inset-0 z-[100] bg-black/90 hidden flex items-center justify-center">
        <div class="text-center">
            <div class="w-16 h-16 border-4 border-brand border-t-transparent rounded-full animate-spin mx-auto mb-4"></div>
            <h3 class="text-xl font-bold text-white">Procesando Solicitud...</h3>
            <p class="text-slate-400 text-sm">Serás redirigido a Mercado Pago</p>
        </div>
    </div>

    <script>
        // CONFIGURACIÓN Y SINCRONIZACIÓN
        const form = document.getElementById('homologacionForm');
        let mercadoPagoLink = null;
        
        // 1. APLICAR IDENTIDAD SAAS
        function applyBranding() {
            const config = JSON.parse(localStorage.getItem('saas_config')) || {};
            
            // Colores
            if(config.color) {
                document.documentElement.style.setProperty('--brand-color', config.color);
                document.getElementById('bg-glow').style.backgroundColor = config.color;
            }
            
            // Textos Básicos
            setText('site-title', config.title);
            setText('footer-brand', config.title);
            setText('hero-title', config.heroTitle);
            setText('hero-subtitle', config.heroSubtitle);
            setText('display-price', config.price);
            setText('btn-text', config.ctaText || 'IR A PAGAR');
            setText('hero-cta', config.ctaText || 'Iniciar Trámite');

            // Textos de Contacto (NUEVO)
            setText('footer-address', config.address);
            setText('footer-phone', config.phone);
            setText('footer-email', config.email); // Si existe en config
            
            const navPhone = document.querySelector('#nav-phone .val');
            if(navPhone && config.phone) navPhone.textContent = config.phone;

            // Logo
            if(config.logo) {
                const navArea = document.getElementById('nav-brand-area');
                navArea.innerHTML = `<img src="${config.logo}" class="h-10 w-auto object-contain"> <span class="font-bold text-xl tracking-tight">${config.title || 'REMAEP'}</span>`;
            }

            // Banner (NUEVO)
            if(config.banner) {
                document.getElementById('hero-banner').style.backgroundImage = `url('${config.banner}')`;
            }

            // Mercado Pago Link
            mercadoPagoLink = config.mpLink;

            // WhatsApp (NUEVO)
            const waBtn = document.getElementById('whatsapp-float');
            if(config.whatsapp) {
                waBtn.href = `https://wa.me/${config.whatsapp.replace(/\D/g,'')}?text=Hola,%20quisiera%20consultar%20sobre%20la%20homologación`;
                waBtn.classList.remove('hidden');
            } else {
                waBtn.classList.add('hidden');
            }

            // Redes Sociales (NUEVO)
            const socialDiv = document.getElementById('social-links');
            socialDiv.innerHTML = '';
            if(config.instagram) socialDiv.innerHTML += `<a href="${config.instagram}" target="_blank" class="text-slate-400 hover:text-brand"><i data-lucide="instagram"></i></a>`;
            if(config.facebook) socialDiv.innerHTML += `<a href="${config.facebook}" target="_blank" class="text-slate-400 hover:text-brand"><i data-lucide="facebook"></i></a>`;

            // SEO (NUEVO)
            if(config.seoTitle) document.getElementById('meta-title').textContent = config.seoTitle;
            if(config.seoDesc) document.getElementById('meta-desc').content = config.seoDesc;
        }

        function setText(id, val) {
            const el = document.getElementById(id);
            if(el && val) el.textContent = val;
        }

        // 2. PROCESO DE ENVÍO
        form.addEventListener('submit', function(e) {
            e.preventDefault();
            
            // Mostrar carga
            document.getElementById('loading-modal').classList.remove('hidden');

            // Simular guardado de datos
            const formData = new FormData(form);
            const solicitud = {
                id: 'REQ-' + Date.now().toString().slice(-4),
                nombre: formData.get('nombre'),
                dni: formData.get('dni'),
                fecha: new Date().toLocaleDateString(),
                status: 'iniciado_pago',
                monto: document.getElementById('display-price').textContent
            };

            // Guardar en "DB"
            const db = JSON.parse(localStorage.getItem('saas_solicitudes')) || [];
            db.unshift(solicitud);
            localStorage.setItem('saas_solicitudes', JSON.stringify(db));

            // REDIRECCIÓN A MERCADO PAGO
            setTimeout(() => {
                if(mercadoPagoLink) {
                    window.location.href = mercadoPagoLink;
                } else {
                    alert("Modo Demo: El pago se registraría aquí, pero no hay link de Mercado Pago configurado en el panel.");
                    document.getElementById('loading-modal').classList.add('hidden');
                    window.location.reload();
                }
            }, 1500);
        });

        // INICIALIZAR
        lucide.createIcons();
        applyBranding();
        window.addEventListener('storage', applyBranding);

    </script>
</body>
</html>
